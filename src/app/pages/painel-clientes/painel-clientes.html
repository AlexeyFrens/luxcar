<h1 class="titulo-pagina">Painel Administrativo - Clientes</h1>

<div class="content-container">
  <div class="table-wrapper">
    <table>
      <thead>
      <tr>
        <th>Nome</th>
        <th>CPF</th>
        <th>Email</th>
        <th>Telefone</th>
        <th>Endereço</th>
        <th>Ações</th>
      </tr>
      </thead>

      <tbody>
        @for (cliente of listaClientes; track cliente) {
          <tr>
            <td><strong>{{ cliente.nome }}</strong></td>
            <td>{{ cliente.cpf }}</td>
            <td>{{ cliente.email }}</td>
            <td>{{ cliente.telefone }}</td>
            <td>{{ cliente.endereco }}</td>
            <td class="actions-cell">
              <button class="button-editar" (click)="abrirModal(cliente)">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M9.16634 4.16667H4.99967C4.55765 4.16667 4.13372 4.34226 3.82116 4.65483C3.5086 4.96739 3.33301 5.39131 3.33301 5.83334V15C3.33301 15.442 3.5086 15.866 3.82116 16.1785C4.13372 16.4911 4.55765 16.6667 4.99967 16.6667H14.1663C14.6084 16.6667 15.0323 16.4911 15.3449 16.1785C15.6574 15.866 15.833 15.442 15.833 15V10.8333M14.6547 2.98834C14.8084 2.82915 14.9923 2.70218 15.1957 2.61483C15.399 2.52749 15.6177 2.48151 15.839 2.47959C16.0603 2.47766 16.2798 2.51983 16.4846 2.60363C16.6894 2.68744 16.8755 2.81119 17.032 2.96768C17.1885 3.12417 17.3122 3.31025 17.396 3.51508C17.4798 3.71991 17.522 3.93937 17.5201 4.16067C17.5182 4.38197 17.4722 4.60067 17.3848 4.80401C17.2975 5.00735 17.1705 5.19126 17.0113 5.345L9.85634 12.5H7.49967V10.1433L14.6547 2.98834Z" stroke="#2E65F3" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </button>
              <button class="button-excluir" (click)="abrirModalExcluir(cliente)">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M8.33301 9.16667V14.1667M11.6663 9.16667V14.1667M3.33301 5.83333H16.6663M15.833 5.83333L15.1105 15.9517C15.0806 16.3722 14.8924 16.7657 14.5839 17.053C14.2755 17.3403 13.8696 17.5 13.448 17.5H6.55134C6.12979 17.5 5.7239 17.3403 5.41541 17.053C5.10693 16.7657 4.91877 16.3722 4.88884 15.9517L4.16634 5.83333H15.833ZM12.4997 5.83333V3.33333C12.4997 3.11232 12.4119 2.90036 12.2556 2.74408C12.0993 2.5878 11.8874 2.5 11.6663 2.5H8.33301C8.11199 2.5 7.90003 2.5878 7.74375 2.74408C7.58747 2.90036 7.49967 3.11232 7.49967 3.33333V5.83333H12.4997Z" stroke="#F32D2D" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </button>
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>
</div>



<div class="edit-modal-overlay" *ngIf="modalAberto">
  <div class="edit-modal">

    <button class="close-btn" (click)="fecharModal()"><img src="assets/images/reserva-icons/close.svg"
                                                              alt="X para fechar modal"></button>

    <h2 class="modal-title">Editar Cliente</h2>

    <form #modalForm="ngForm" class="modal-form" (ngSubmit)="salvarEdicao()">

      <div class="form-group">
        <label for="id">ID</label>
        <input type="text" id="id" [(ngModel)]="clienteEditando.id" name="id" [disabled]="true">
      </div>

      <div class="form-group">
        <label for="nome">Nome Completo</label>
        <input type="text" [(ngModel)]="clienteEditando.nome" name="nome" id="nome" placeholder="Digite seu nome completo" required/>
      </div>

      <div class="form-group">
        <label for="email">Email</label>
        <input type="text" [(ngModel)]="clienteEditando.email" name="email" id="email" placeholder="Digite seu email" required/>
      </div>

      <div class="form-group">
        <label for="cpf">CPF</label>
        <input type="text" [(ngModel)]="clienteEditando.cpf" name="cpf" id="cpf" placeholder="Digite seu CPF" required/>
      </div>

      <div class="form-group">
        <label for="telefone">Telefone</label>
        <input type="text" [(ngModel)]="clienteEditando.telefone" name="telefone" id="telefone" placeholder="Digite seu telefone" required/>
      </div>

      <div class="form-group">
        <label for="endereco">Endereço</label>
        <input type="text" [(ngModel)]="clienteEditando.endereco" name="endereco" id="endereco" placeholder="Digite seu endereço completo" required/>
      </div>

      <div class="form-group">
        <label for="inputSenha">Senha</label>
        <div class="password-group">
          <input id="inputSenha" type="password" placeholder="Digite sua nova senha"/>
          <span class="show-password-modal" (click)="toggleSenha()">EXIBIR</span>
        </div>
      </div>

      <button type="submit" class="button-salvar" [disabled]="modalForm.invalid">Atualizar</button>
    </form>
  </div>
</div>



<div class="delete-overlay" *ngIf="modalExcluir">
  <div class="delete-modal">
    <h2>Excluir Cliente</h2>
    <p>
      Tem certeza que deseja excluir o cliente
      <strong>{{ clienteExcluir?.nome }}</strong>?
    </p>

    <div class="delete-buttons">
      <button class="btn-confirm" (click)="excluirClienteConfirmado()">Sim</button>
      <button class="btn-cancel" (click)="fecharModalExcluir()">Não</button>
    </div>
  </div>
</div>
